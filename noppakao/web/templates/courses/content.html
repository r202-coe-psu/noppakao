{% extends "base/default-page-user.html" %}
{% import "/base/editor-renderer.html" as editor_renderer %}
{% import "/base/html-renderer-refactor.html" as renderer %}

{% block content %}
<div>
    <div class="breadcrumbs">
        <ul class="text-lg font-semibold">
            <li><a href="{{ url_for('course.index') }}">Courses</a></li>
            <li><a href="{{ url_for('course.course_detail', course_id=course.id)}}">{{ course.name }}</a></li>
        </ul>
    </div>
    <div class="mt-4 grid-cols-12 gap-4 grid">
        <div class="@container col-span-10">
            <div class="rounded-md border-2 border-[#EFEEEE] min-h-96 gap-6">
                <div
                    class="h-44 w-full bg-[url('{{ current_content.header_image_url }}')] rounded-t-md bg-cover bg-center relative">
                    <div
                        class="text-white absolute inset-0 bg-[linear-gradient(to_right,#202020_0%,#202020_46%,rgba(80,73,73,0)_100%)] rounded-t-md">
                        <div class="w-[70%] p-8">
                            <p class="font-semibold text-lg">{{ current_content.header }}</p>
                            <p class="text-sm">{{ current_content.header_description }}</p>
                        </div>
                        <progress class="progress progress-primary w-full bottom-0 absolute bg-[#EFEEEE]" value="50"
                            max="100"></progress>
                    </div>
                </div>
                <div class="p-6 pt-0 flex flex-col gap-4">

                    <div class="overflow-y-auto p-4 text-wrap w-full whitespace-pre-wrap break-words">
                        {{ current_content.content | safe }}
                    </div>
                    
                    <div class="flex flex-row justify-end gap-4">
                        {% if current_content.index > 1 %}
                        <a href="{{ url_for('course.course_content', course_id=course_id, page_id=current_content.index - 1) }}"
                        class="btn btn-primary w-40 ">Previous</a>
                        {% endif %}
                        
                        {% if current_content.index < contents|length %}
                        <a href="{{ url_for('course.course_content', course_id=course_id, page_id=current_content.index + 1) }}"
                        class="btn btn-primary w-40">Next</a>
                        {% endif %}
                        
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-span-2 bg-[#F3EFEE] rounded-md p-6 w-full">
            <p class="font-semibold text-[#494949] mb-6">Outline</p>
            <ul class="flex flex-col gap-4 font-medium text-[#494949]">
                {% for content in contents %}
                <li class="hover:underline cursor-pointer">
                    <a
                        href="{{ url_for('course.course_content', course_id=course_id, page_id=content.index) }}">
                        {{ content.header }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block additional_js %}
{{ editor_renderer.add_editor_library() }}
{{ editor_renderer.config_editor() }}

{{ editor_renderer.render_readonly_editor('content') }}
{% endblock %}
